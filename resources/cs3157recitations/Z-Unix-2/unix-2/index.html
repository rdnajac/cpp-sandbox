
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A collection of C++ code snippets and examples.">
      
      
        <meta name="author" content="Ryan D. Najac">
      
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>Unix 2 - C++ Sandbox</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unix-2" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="C++ Sandbox" class="md-header__button md-logo" aria-label="C++ Sandbox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            C++ Sandbox
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Unix 2
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/rdnajac/cpp-sandbox" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="C++ Sandbox" class="md-nav__button md-logo" aria-label="C++ Sandbox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    C++ Sandbox
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rdnajac/cpp-sandbox" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ sandbox
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../a-tour-of-cpp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A Tour of C++
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../advprog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Programming
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../cuda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CUDA
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Make Your Own modulestd`
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../pimpl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pointer to Implementation (PImpl)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../qsort/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quicksort
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../tcp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TCP Echo Server and Client
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#shells-let-users-access-a-computers-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Shells let users access a computer's resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-path-variable-shows-where-to-find-programs" class="md-nav__link">
    <span class="md-ellipsis">
      The PATH variable shows where to find programs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The PATH variable shows where to find programs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-bin-directories-each-have-a-different-purpose" class="md-nav__link">
    <span class="md-ellipsis">
      The bin directories each have a different purpose
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-unix-filesystem-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Other Unix filesystem conventions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#permissions-restrict-what-others-can-do-with-your-files" class="md-nav__link">
    <span class="md-ellipsis">
      Permissions restrict what others can do with your files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shells-are-also-scripting-languages" class="md-nav__link">
    <span class="md-ellipsis">
      Shells are also scripting languages
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shells are also scripting languages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#working-with-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Working with variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saving-commands-into-a-file" class="md-nav__link">
    <span class="md-ellipsis">
      Saving commands into a file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loops" class="md-nav__link">
    <span class="md-ellipsis">
      Loops
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditionals" class="md-nav__link">
    <span class="md-ellipsis">
      Conditionals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssh-launches-shells-on-computers-over-the-network" class="md-nav__link">
    <span class="md-ellipsis">
      SSH launches shells on computers over the network
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="unix-2">Unix 2</h1>
<p>Now that we're a little more familiar with Unix, let's go over some things we
glossed over in
<a href="../../A-Unix/unix-editors-compiling/">the first Unix recitation</a>. We'll also
learn tips and tricks to improve productivity on Unix-like computers.</p>
<h2 id="shells-let-users-access-a-computers-resources">Shells let users access a computer's resources</h2>
<p>A <strong>shell</strong> is a program used to access files and programs on a computer. They
can be graphical or text-based -- in this class, we'll only worry about text
shells. Examples include <code>bash</code> (the default on CLAC), <code>zsh</code>, and Windows
PowerShell. The original shell program was the Thompson shell, <code>sh</code>.</p>
<p>The shell is only special in that it's automatically run when we open a new
terminal window. Apart from that, it's just like any other program. In fact, in
<code>isort</code> and <code>mdb-lookup</code>, we saw how easy it is to write a shell-like program
that takes user input and prints out a response.</p>
<p>Similarly, we can run a shell as a program by typing its name. Let's say we're
using <code>bash</code> on CLAC, and want to try out <code>csh</code>:</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ csh
vienna:~% echo &#39;Hello World&#39;
Hello World
vienna:~% exit
exit
yourUNI@vienna:~$
</code></pre></div>
<p>Once we're done playing with csh, just type <code>exit</code>. This tells <code>csh</code> that we
want it to exit, leaving us with <code>bash</code>, the outer shell that launched it.</p>
<h2 id="the-path-variable-shows-where-to-find-programs">The <code>PATH</code> variable shows where to find programs</h2>
<p>Shells also allow us to set variables. The <code>PATH</code> variable is a list of
colon-separated paths to directories that the shell looks inside to find
programs. For example, if you wanted to be able to run your <code>twecho</code>
executable from any directory on CLAC, you could put the absolute path to
<code>twecho</code> in your README.</p>
<p>To see our account's <code>PATH</code> variable:</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ echo $PATH
/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
</code></pre></div>
<p>When we type a command, our shell opens directories in the order listed until it
finds a program matching what we typed. So for <code>gcc</code>, it would search for
<code>/sbin/gcc</code>, <code>/usr/local/sbin/gcc</code>, <code>/usr/local/bin/gcc</code>, etc.</p>
<p>With this knowledge, prepending to <code>PATH</code> is a clever way to use our own
programs instead of the ones provided by the CLAC administrators -- it'll force
the shell to search our directory before looking anywhere else. For example, if
we keep our programs in <code>/home/yourUNI/bin</code>, adding this to the end of <code>.bashrc</code>
will do the trick:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/home/yourUNI/bin:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</span></code></pre></div>
<p>(More on how this code works at the end of this recitation.)</p>
<h3 id="the-bin-directories-each-have-a-different-purpose">The <code>bin</code> directories each have a different purpose</h3>
<p>Programs are installed in different directories depending on their origin and
importance.</p>
<ul>
<li>If the path begins with <code>/usr</code>, this directory is for non-essential programs.
  The system can still retain basic functionality if we lose access to these.</li>
<li>If the directory is called <code>sbin</code>, it holds system or administrator programs.
  Directories called <code>bin</code> are meant for everyone to use.</li>
<li>If the path begins with <code>/usr/local</code>, it's for programs that aren't part of
  the operating system, such as programs that we wrote ourselves.</li>
</ul>
<p>Some examples:</p>
<ul>
<li><code>/bin</code> = essential, for all users (such as <code>ls</code> and <code>mv</code>)</li>
<li><code>/sbin</code> = essential, for system and administrators (such as <code>fsck</code>, which
  scans the filesystem for errors)</li>
<li><code>/usr/bin</code> = non-essential, for all users (such as <code>gcc</code> and <code>valgrind</code>)</li>
<li><code>/usr/local/bin</code> = non-essential, for all users, not part of OS (such as
  MATLAB)</li>
</ul>
<h3 id="other-unix-filesystem-conventions">Other Unix filesystem conventions</h3>
<p>The tilde <code>~</code> refers to the current user's home directory. Every user has a
directory under <code>/home/yourUNI</code> for storing their files. For example, <code>~/cs3157</code>
expands to <code>/home/yourUNI/cs3157</code>.</p>
<p>What's up with that slash <code>/</code> at the beginning? It represents the topmost or
<strong>root directory</strong> (not to be confused with the root <em>user</em>).</p>
<p>Unlike Windows, Unix-like systems do not have separate root directories for each
drive. Instead, drives are represented as separate directories under <code>/media</code>
(removable drives) and <code>/mnt</code> (non-removable). When we <code>cd</code> into these
directories, we are automatically looking at a different drive.</p>
<p><strong>Mounting</strong> is the process of installing a drive at some directory in the
filesystem.</p>
<p>An aside: now we can appreciate why the designers of Unix decided to separate
binaries into essential (<code>/bin</code>, <code>/sbin</code>) and non-essential (<code>/usr</code>). In the
early days of computers, hard drives were not very big, so computers usually had
two. They would boot from the first drive <code>/</code>, which contained enough programs
to mount the second hard drive at <code>/usr</code> (and perform basic debugging if that
failed).</p>
<p>If you're interested in the filesystem and its design, check out these articles:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Unix_filesystem">Unix filesystem</a></li>
<li>Linux Foundation's <a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">Filesystem Hierarchy Standard</a></li>
</ul>
<h2 id="permissions-restrict-what-others-can-do-with-your-files">Permissions restrict what others can do with your files</h2>
<p>On Unix-style filesystems, each file has a set of permissions associated with
it. Each permission has both a character and a number associated with it.
These are:</p>
<ul>
<li><code>r</code> = 4 for read (this file can be opened)</li>
<li><code>w</code> = 2 for write (this file can be modified)</li>
<li><code>x</code> = 1 for execute (this file can be run as a program)</li>
</ul>
<p>If someone is allowed to both read and write to a file, the permission would be
4 + 2 = 6. Notice that for each set of enabled permissions, the sum is unique.
That is, you can only get 6 by having <code>r</code> and <code>w</code> permissions. This allows the
computer to store the permission flags more efficiently.</p>
<p>Additionally, there are three permissions per file:</p>
<ul>
<li>User: Applies to what the owner of the file is allowed to do</li>
<li>Group: Applies to other users in the same group</li>
<li>World: Applies to all users on the computer</li>
</ul>
<p>To see the permissions, we can use the <code>ls -l</code> flag.</p>
<p>To change the permissions, we use the <code>chmod</code> command. The three numbers
represent user, group, and world permissions:</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ chmod 740
</code></pre></div>
<h2 id="shells-are-also-scripting-languages">Shells are also scripting languages</h2>
<p>In 1977, Stephen Bourne introduced the Bourne shell -- the first shell to
support the style of scripting we use today. It let users write scripts as text
files with lists of commands, plus the usual programming language stuff like
variables and control flow. (Confusingly, the Bourne shell and the Thompson
shell it replaced are both called <code>sh</code>.)</p>
<h3 id="working-with-variables">Working with variables</h3>
<p>We can define variables like this. In shell scripts, most of the variables will
be string type.</p>
<p>Type stuff in the format <code>name=value</code> into the terminal to make some variables:</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ greeting=&quot;Hello world&quot;
yourUNI@vienna:~$ mynumber=42
</code></pre></div>
<p>To print the variables, we need to put them into a string. bash supports string
interpolation to insert the value of a variable into a string:</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ message=&quot;$greeting -- my favorite number is $mynumber&quot;
yourUNI@vienna:~$ echo &quot;$message&quot;
Hello world -- my favorite number is 42
</code></pre></div>
<p>We can also delete variables with the <code>unset</code> keyword.</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ temp=&quot;get rid of me&quot;
yourUNI@vienna:~$ echo &quot;$temp&quot;
get rid of me
yourUNI@vienna:~$ unset temp
yourUNI@vienna:~$ echo &quot;$temp&quot; # prints an empty line

yourUNI@vienna:~$
</code></pre></div>
<p>The <code>export</code> keyword ensures the variable is available in bash instances
launched from this instance.</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ export myvar=&quot;look, ma, it&#39;s inherited&quot;
yourUNI@vienna:~$ bash # enter child shell
yourUNI@vienna:~$ echo &quot;$myvar&quot;
look, ma, it&#39;s inherited
</code></pre></div>
<p>Finally, we can grab the stdout of any command with <code>$()</code>:</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ all_my_files=$(ls -a)
yourUNI@vienna:~$ echo all_my_files # prints stored output of previous run of ls -a
</code></pre></div>
<h3 id="saving-commands-into-a-file">Saving commands into a file</h3>
<p>To put it all together, here's an example of a bash script file:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Here are your files:&quot;</span><span class="w"> </span><span class="c1"># Print this string</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>ls<span class="w"> </span><span class="c1"># List current directory files</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># Make some variables</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="nv">number</span><span class="o">=</span><span class="m">42</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="nv">animal</span><span class="o">=</span><span class="s2">&quot;dogs&quot;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1"># Print with string interpolation</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;I have </span><span class="nv">$number</span><span class="s2"> </span><span class="nv">$animal</span><span class="s2">&quot;</span>
</span></code></pre></div>
<p>The <code>#!/bin/bash</code> at the top gives the path of the interpreter. The shell will
use the program specified here to run the script. We can also specify non-shell
interpreters -- for example, <code>#!/usr/bin/python</code> for a Python script.</p>
<p>The shell will run each line of this file as if we typed it at the prompt.</p>
<p>Save it into a file ending with <code>.sh</code>, and add the execute permission:</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ vim dogs.sh
yourUNI@vienna:~$ chmod 700 dogs.sh
</code></pre></div>
<p>Now, if we use <code>ls -al</code>, we'll see that our script has the <code>x</code> column set. This
means we can run the script, like we would any program:</p>
<div class="language-text highlight"><pre><span></span><code>yourUNI@vienna:~$ ./dogs.sh
I have 42 dogs
</code></pre></div>
<h3 id="loops">Loops</h3>
<p>In shell scripts, for loops have:</p>
<ul>
<li>String of newline-separated things to iterate through.</li>
<li>Variable name that will be set before each iteration.</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1"># seq command gives a range of numbers</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="k">for</span><span class="w"> </span>number<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>seq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">10</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;number </span><span class="nv">$number</span><span class="s2">&quot;</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="k">done</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="c1"># a fake version of ls</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="k">for</span><span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>ls<span class="w"> </span>-a<span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;file: </span><span class="nv">$file</span><span class="s2">&quot;</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="k">done</span>
</span></code></pre></div>
<h3 id="conditionals">Conditionals</h3>
<p>The comparison operators are kind of weird:</p>
<p><strong>Integers:</strong></p>
<ul>
<li><code>-eq</code> equal</li>
<li><code>-ne</code> not equal</li>
<li><code>-gt</code> greater than</li>
<li><code>-ge</code> greater than or equal to</li>
<li><code>-lt</code> less than</li>
<li><code>-le</code> less than or equal to</li>
</ul>
<p><strong>Strings:</strong></p>
<ul>
<li><code>==</code> equal</li>
<li><code>!=</code> not equal</li>
<li><code>-z</code> check for empty string</li>
</ul>
<p><a href="http://www.tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html">Full list of comparison operators</a></p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nv">n</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span>dogs.sh<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l<span class="k">)</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$n</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Same number of lines&quot;</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">else</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Somebody changed the file&quot;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="k">fi</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="nb">read</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Enter a string: &quot;</span><span class="w"> </span>str
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="nv">$str</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;You didn&#39;t enter anything&quot;</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="k">fi</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$str</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Greetings&quot;</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="k">fi</span>
</span></code></pre></div>
<h2 id="ssh-launches-shells-on-computers-over-the-network">SSH launches shells on computers over the network</h2>
<p>Just a note about how SSH works. When we type 
<code>ssh yourUNI@clac.cs.columbia.edu</code>, the SSH program makes a connection to a CLAC
server. The remote server launches a shell program, and connects its input and
output to the SSH connection, so that we can control the computer remotely.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023&ndash;2024 <a href="https://rdnajac.tech">Ryan D. Najac</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.code.copy"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>